import hre from "hardhat";
import { toLoggableObject } from "../utils/print";

async function main() {
  const data =
    "0x0006a9776d0ec26acd5f54fbaaf58a6efa4fd3ae0ae8b34d767e88c48863cabc0000000000000000000000000000000000000000000000000000000012b15c0d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000003000001010100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012000031dcbdf6f280392039ea6381b85a23bc0b90a40b676c4ec0b669dd8f0f38e000000000000000000000000000000000000000000000000000000006751693e000000000000000000000000000000000000000000000000000000006751693e00000000000000000000000000000000000000000000000000004aa8ec54d258000000000000000000000000000000000000000000000000002f658ad796f360000000000000000000000000000000000000000000000000000000006752babe0000000000000000000000000000000000000000000000212d905c42295f40000000000000000000000000000000000000000000000000212c578b3ffce620000000000000000000000000000000000000000000000000212ec4d7aef338200000000000000000000000000000000000000000000000000000000000000000062d8e351372b86b81188cf84a460b778c80ea8b70ec808f3c6da9edbe4c7802760d241ac8cec1ef1a3fc15909a83c3ecb1794f797d12b9c94a9501453f766cfa61e86e73869b213d8a0591a7cc37780532584e1e3065b7fcc46671670bec40520da28e585c1c4c389e3a7b07c42e8ff75bdf1fab1620d5e72fc805184242f8014dc503626726817d2b4f48d2b1eb623872fe9b4b2929b8ec27ac8579174f25496332f29ca6fb9b5dcdf446724d1589e9126107198bcc879a10de0081600966354000000000000000000000000000000000000000000000000000000000000000674e9d614b1885991f58cb4742fcd787fa235f02b9a6cf62a622a8dd8900df7720e311669533e312420feb6a3bb5c1a89633981cad0f986a5da5d01c5aab0c22d6eee90c5002b62199becfb25d3fd078366eab3a344d09226ac3586ee95c9fa7246abb9cc949cb1db0952f9c3e0dae4447f9a40fe79673271a9bce5db6ffc39cb59071f61a697d8ca9477d7da0a08a384881c19b5d539d242f615786deb26512066bd0bf2216f8dafb743ede63e5aca6fd1c8235beaeb047bd2f5308216476a64";
  const token = "0xc33D9C096e74aa4f571E9417b69a19C4A1e72ef2"; // BCH
  const { read, get } = hre.deployments;
  const oracle = await get("Oracle");
  const result = await read(
    "ChainlinkDataStreamProvider",
    {
      from: oracle.address,
      log: true,
    },
    "getOraclePrice",
    token,
    data
  );

  console.log(toLoggableObject(result));
}

main()
  .then(() => {
    console.log("done");
    process.exit(0);
  })
  .catch((ex) => {
    console.error(ex);
    process.exit(1);
  });
